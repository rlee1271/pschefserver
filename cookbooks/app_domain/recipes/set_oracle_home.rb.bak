#
# Cookbook:: app_domain
# Recipe:: set_oracle_home
#
# Copyright:: 2017, The Authors, All Rights Reserved.

ruby_block 'find_oracle_dir' do
  block do
	  if Dir.exist?('/apps/oracle/product/12.1.0/client_1')
        node.run_state['oracle_home_var'] = '/apps/oracle/product/12.1.0/client_1'
	  elsif Dir.exist?('/apps/oracle/product/12.1.0/client_2')
        node.run_state['oracle_home_var'] = '/apps/oracle/product/12.1.0/client_2'
	  elsif Dir.exist?('/apps/oracle/product/12.1.0/client_3')
        node.run_state['oracle_home_var'] = '/apps/oracle/product/12.1.0/client_3'
	  elsif Dir.exist?('/apps/oracle/product/11.2.0/client_3')
        node.run_state['oracle_home_var'] = '/apps/oracle/product/11.2.0/client_3'
	  elsif Dir.exist?('/apps/oracle/product/11.2.0/client_2')
        node.run_state['oracle_home_var'] = '/apps/oracle/product/11.2.0/client_2'
	  elsif Dir.exist?('/apps/oracle/product/11.2.0/client_1')
        node.run_state['oracle_home_var'] = '/apps/oracle/product/11.2.0/client_1'	  
	  end
	  
#  puts '?????????????????????????????????????????????????????????????????????????????????'
#  puts node.run_state['oracle_home_var']
#  puts '?????????????????????????????????????????????????????????????????????????????????'	  
  end
end